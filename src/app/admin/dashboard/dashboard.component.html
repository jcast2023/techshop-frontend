<div class="container-fluid py-4">
  <h2 class="mb-4 fw-bold">Panel de Control Administrativo</h2>

  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card border-0 shadow-sm bg-primary text-white p-3">
        <h6>Ventas Totales</h6>
        <h3 class="fw-bold">{{ stats?.ventasTotales | currency }}</h3>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm bg-warning text-dark p-3">
        <h6>Pedidos Pagados</h6>
        <h3 class="fw-bold">{{ stats?.pedidosPendientes }}</h3>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm bg-danger text-white p-3">
        <h6>Stock CrÃ­tico (< 5)</h6>
        <h3 class="fw-bold">{{ stats?.stockCritico }}</h3>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm bg-success text-white p-3">
        <h6>Productos en CatÃ¡logo</h6>
        <h3 class="fw-bold">{{ stats?.totalProductos }}</h3>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-lg-7">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-header bg-white border-0 py-3">
          <h5 class="fw-bold mb-0 text-dark">ðŸ”¥ Top 5 Productos Estrella</h5>
        </div>
        <div class="card-body">
          <div *ngFor="let p of topProductos; let i = index" class="mb-3">
            <div class="d-flex justify-content-between align-items-center mb-1">
              <div class="d-flex align-items-center">
                <span class="badge rounded-pill bg-warning text-dark me-2">#{{ i + 1 }}</span>
                <span class="fw-bold">{{ p.nombre }}</span>
              </div>
              <span class="text-muted small">{{ p.categoria?.nombre }}</span>
            </div>
            <div class="progress" style="height: 8px;">
              <div class="progress-bar bg-success" role="progressbar"
                   [style.width]="(100 - (i * 20)) + '%'"></div>
            </div>
          </div>
          <div *ngIf="topProductos.length === 0" class="text-center text-muted py-3">
            No hay datos de ventas registrados aÃºn.
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-5">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-header bg-white border-0 py-3">
          <h5 class="fw-bold mb-0 text-dark">ðŸ“Š Stock por CategorÃ­a</h5>
        </div>
        <div class="card-body d-flex flex-column align-items-center">
          <div style="width: 100%; height: 280px;">
            <canvas id="canvasCategorias"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-4 g-4">
    <div class="col-md-6">
      <div class="card shadow-sm border-0 p-4">
        <h5>GestiÃ³n de Productos</h5>
        <p class="text-muted">Actualiza precios, descripciones o niveles de stock.</p>
        <button class="btn btn-outline-primary w-100" routerLink="/admin/stock">
          Ir a Inventario de Stock
        </button>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card shadow-sm border-0 p-4">
        <h5>Control de Pedidos</h5>
        <p class="text-muted">Visualiza todas las ventas y descarga reportes PDF.</p>
        <button class="btn btn-outline-primary w-100" routerLink="/admin/pedidos">
          Gestionar Pedidos
        </button>
      </div>
    </div>
  </div>
</div>
