<app-navbar></app-navbar>

<div class="container py-5">
  @if (isLoading) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-3">Cargando detalle del producto...</p>
    </div>
  } @else if (error) {
    <div class="alert alert-danger text-center">
      <i class="bi bi-exclamation-triangle me-2"></i>
      {{ error }}
    </div>
  } @else if (product) {
    <div class="row g-5">

      <div class="col-lg-6">
        <img
          [src]="productService.getProductImageUrl(product.imagen)"
          [alt]="product.nombre"
          class="img-fluid rounded shadow"
          style="max-height: 600px; object-fit: contain; width: 100%; background: #f8f9fa;"
        >
      </div>


      <div class="col-lg-6">
        <h1 class="display-6 fw-bold mb-3">{{ product.nombre }}</h1>

        <h2 class="text-primary fw-bold mb-4">
          {{ product.precio | currency:'USD':'symbol':'1.2-2' }}
        </h2>

        <p class="lead text-muted mb-4">
          {{ product.descripcion }}
        </p>

        <div class="d-flex align-items-center mb-4">
          <span class="me-3">
            <strong>Stock:</strong>
            <span [class.text-danger]="product.stock === 0"
                  [class.text-warning]="product.stock > 0 && product.stock < 5"
                  [class.text-success]="product.stock >= 5">
              {{ product.stock }} unidades
            </span>
          </span>
        </div>

        <div class="d-flex flex-wrap gap-3 mt-4"> <button class="btn btn-primary btn-lg px-4"
          (click)="addToCart(product)"
          [disabled]="product.stock === 0">
    <i class="bi bi-cart-plus me-2"></i>
    {{ product.stock === 0 ? 'Agotado' : 'Añadir al carrito' }}
  </button>

  <a class="btn btn-outline-secondary btn-lg px-4" [routerLink]="['/productos']">
    <i class="bi bi-arrow-left me-2"></i> Volver al catálogo
  </a>
</div>
      </div>
    </div>
  }
</div>
